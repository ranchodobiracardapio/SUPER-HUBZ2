<html lang="pt-BR">
 <head>
  <meta charset="utf-8" />
  <meta content="width=device-width, initial-scale=1" name="viewport" />
  <title>Hubz Space</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link
   href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
   rel="stylesheet"
  />
  <link
   href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500&amp;family=Roboto&amp;display=swap"
   rel="stylesheet"
  />
  <style>
   body {
    font-family: "Roboto", sans-serif;
   }
   h1,
   h2,
   h3 {
    font-family: "Orbitron", sans-serif;
   }
   /* Hide scrollbar but allow scrolling */
   .no-scrollbar::-webkit-scrollbar {
    display: none;
   }
   .no-scrollbar {
    -ms-overflow-style: none;
    scrollbar-width: none;
   }
   /* Scrollbar for modal content */
   .modal-content::-webkit-scrollbar {
    width: 8px;
   }
   .modal-content::-webkit-scrollbar-thumb {
    background-color: rgba(100, 100, 100, 0.5);
    border-radius: 4px;
   }
   .modal-content {
    scrollbar-width: thin;
    scrollbar-color: rgba(100, 100, 100, 0.5) transparent;
   }
   canvas {
    max-width: 100%;
    height: auto;
    border-radius: 0.5rem;
    margin-bottom: 1rem;
    display: block;
    margin-left: auto;
    margin-right: auto;
   }
  </style>
 </head>
 <body class="bg-gray-900 text-gray-100 min-h-screen flex flex-col">
  <header class="bg-gray-800 shadow-md">
   <div
    class="container mx-auto max-w-7xl px-3 py-2 flex items-center justify-between"
   >
    <div class="flex items-center space-x-1 md:space-x-2">
     <img
      alt="Ícone de foguete representando exploração espacial"
      class="w-8 h-8 md:w-10 md:h-10"
      height="40"
      src="https://storage.googleapis.com/a1aa/image/8e44623c-dc76-4a4b-2eba-ac3b216bd07a.jpg"
      width="40"
     />
     <h1 class="text-xl md:text-2xl font-bold tracking-wide">Hubz Space</h1>
    </div>
    <nav class="hidden md:flex space-x-4 text-sm md:text-base font-semibold">
     <a class="hover:text-indigo-400 transition" href="#">Início</a>
     <a class="hover:text-indigo-400 transition" href="#">Missões</a>
     <a class="hover:text-indigo-400 transition" href="#">Astronomia</a>
     <a class="hover:text-indigo-400 transition" href="#">Tecnologia</a>
     <a class="hover:text-indigo-400 transition" href="#">Contato</a>
     <a class="hover:text-indigo-400 transition" href="#">Galeria</a>
     <a class="hover:text-indigo-400 transition" href="#">Eventos</a>
    </nav>
    <button
     aria-label="Alternar menu"
     class="md:hidden text-gray-300 hover:text-indigo-400 focus:outline-none"
     id="menu-btn"
    >
     <i class="fas fa-bars fa-lg"></i>
    </button>
   </div>
   <nav
    aria-label="Navegação móvel"
    class="md:hidden bg-gray-800 px-3 py-1 space-y-1 hidden"
    id="mobile-menu"
   >
    <a
     class="block py-1 px-2 rounded text-xs hover:bg-indigo-600 transition"
     href="#"
     >Início</a
    >
    <a
     class="block py-1 px-2 rounded text-xs hover:bg-indigo-600 transition"
     href="#"
     >Missões</a
    >
    <a
     class="block py-1 px-2 rounded text-xs hover:bg-indigo-600 transition"
     href="#"
     >Astronomia</a
    >
    <a
     class="block py-1 px-2 rounded text-xs hover:bg-indigo-600 transition"
     href="#"
     >Tecnologia</a
    >
    <a
     class="block py-1 px-2 rounded text-xs hover:bg-indigo-600 transition"
     href="#"
     >Contato</a
    >
    <a
     class="block py-1 px-2 rounded text-xs hover:bg-indigo-600 transition"
     href="#"
     >Galeria</a
    >
    <a
     class="block py-1 px-2 rounded text-xs hover:bg-indigo-600 transition"
     href="#"
     >Eventos</a
    >
   </nav>
  </header>
  <main class="flex-grow container mx-auto max-w-7xl px-3 py-4">
   <section class="mb-6">
    <h2 class="text-xl md:text-2xl font-bold mb-2 text-center leading-tight">
     Últimas Notícias do Espaço
    </h2>
    <div
     id="news-container"
     class="flex space-x-3 overflow-x-auto no-scrollbar px-0"
    >
     <!-- Notícias carregadas via JS -->
    </div>
   </section>
   <section class="mb-6">
    <h2 class="text-xl md:text-2xl font-bold mb-2 text-center leading-tight">
     Próximas Missões Espaciais
    </h2>
    <div id="missions-container" class="space-y-2 max-w-4xl mx-auto text-sm md:text-base">
     <!-- Missões carregadas via JS -->
    </div>
   </section>
   <section class="mb-6">
    <h2 class="text-xl md:text-2xl font-bold mb-2 text-center leading-tight">
     Galeria Espacial
    </h2>
    <div
     id="gallery-container"
     class="grid grid-cols-3 sm:grid-cols-4 md:grid-cols-6 gap-2 max-w-7xl mx-auto"
    >
     <!-- Galeria carregada via JS -->
    </div>
   </section>
   <section>
    <h2 class="text-xl md:text-2xl font-bold mb-2 text-center leading-tight">
     Eventos Espaciais
    </h2>
    <div
     id="events-container"
     class="max-w-3xl mx-auto space-y-2 text-sm md:text-base"
    >
     <!-- Eventos carregados via JS -->
    </div>
   </section>
  </main>

  <!-- Modal Artigo -->
  <div
   id="article-modal"
   class="fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center p-4 z-50 hidden"
   role="dialog"
   aria-modal="true"
   aria-labelledby="article-title"
  >
   <div
    class="bg-gray-800 rounded-lg shadow-lg max-w-3xl w-full max-h-[90vh] overflow-y-auto modal-content relative"
   >
    <button
     id="close-article"
     aria-label="Fechar artigo"
     class="absolute top-3 right-3 text-gray-400 hover:text-indigo-400 text-2xl focus:outline-none"
    >
     &times;
    </button>
    <div id="article-content" class="p-5 text-gray-100">
     <!-- Conteúdo do artigo carregado via JS -->
    </div>
   </div>
  </div>

  <footer class="bg-gray-800 text-gray-400 py-3 mt-10">
   <div
    class="container mx-auto max-w-7xl px-3 flex flex-col md:flex-row justify-between items-center text-xs md:text-sm"
   >
    <p>© 2024 Hubz Space. Todos os direitos reservados.</p>
    <div class="flex space-x-4 mt-2 md:mt-0 text-base md:text-lg">
     <a aria-label="Facebook" class="hover:text-indigo-400 transition" href="#"
      ><i class="fab fa-facebook"></i
     ></a>
     <a aria-label="Twitter" class="hover:text-indigo-400 transition" href="#"
      ><i class="fab fa-twitter"></i
     ></a>
     <a aria-label="Instagram" class="hover:text-indigo-400 transition" href="#"
      ><i class="fab fa-instagram"></i
     ></a>
     <a aria-label="LinkedIn" class="hover:text-indigo-400 transition" href="#"
      ><i class="fab fa-linkedin"></i
     ></a>
     <a aria-label="YouTube" class="hover:text-indigo-400 transition" href="#"
      ><i class="fab fa-youtube"></i
     ></a>
    </div>
   </div>
  </footer>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.9.179/pdf.min.js"></script>
  <script>
   const menuBtn = document.getElementById("menu-btn");
   const mobileMenu = document.getElementById("mobile-menu");

   menuBtn.addEventListener("click", () => {
    mobileMenu.classList.toggle("hidden");
   });

   // Função para carregar JSON externo
   async function fetchJSON(url) {
    try {
     const response = await fetch(url);
     if (!response.ok) throw new Error("Erro ao carregar " + url);
     return await response.json();
    } catch (error) {
     console.error(error);
     return null;
    }
   }

   // Render functions
   function renderNews(newsData) {
    const container = document.getElementById("news-container");
    container.innerHTML = "";
    newsData.forEach((item) => {
     const article = document.createElement("article");
     article.className =
      "bg-gray-800 rounded-lg shadow-lg overflow-hidden flex-shrink-0 w-64 flex flex-col cursor-pointer";
     article.setAttribute("tabindex", "0");
     article.setAttribute("role", "button");
     article.setAttribute("aria-pressed", "false");
     article.dataset.id = item.id;

     // For news, show a thumbnail image or placeholder
     let thumbHtml = "";
     if (item.type === "image" && item.src) {
      thumbHtml = `<img src="${item.src}" alt="${item.alt || item.title}" class="w-full h-36 object-cover" height="144" width="256" />`;
     } else if (item.type === "video" && item.src) {
      thumbHtml = `<video src="${item.src}" class="w-full h-36 object-cover" height="144" width="256" muted playsinline></video>`;
     } else if (item.type === "pdf" && item.src) {
      // Show a PDF icon placeholder
      thumbHtml = `<img src="https://placehold.co/256x144/png?text=PDF" alt="Ícone representando documento PDF para ${item.title}" class="w-full h-36 object-contain bg-gray-700 p-6" height="144" width="256" />`;
     } else {
      thumbHtml = `<img src="https://placehold.co/256x144/png?text=Sem+imagem" alt="Sem imagem disponível para ${item.title}" class="w-full h-36 object-cover" height="144" width="256" />`;
     }

     article.innerHTML = `
      ${thumbHtml}
      <div class="p-3 flex flex-col flex-grow">
       <h3 class="text-base font-semibold mb-1 leading-tight">${item.title}</h3>
       <p class="text-gray-300 flex-grow text-xs leading-snug">${item.text || ""}</p>
      </div>
     `;
     // Evento click para abrir artigo
     article.addEventListener("click", () => openArticle(item.id));
     article.addEventListener("keydown", (e) => {
      if (e.key === "Enter" || e.key === " ") {
       e.preventDefault();
       openArticle(item.id);
      }
     });
     container.appendChild(article);
    });
   }

   function renderMissions(missionsData) {
    const container = document.getElementById("missions-container");
    container.innerHTML = "";
    missionsData.forEach((item) => {
     const div = document.createElement("div");
     div.className =
      "bg-gray-800 rounded-lg shadow-lg p-3 md:p-4 flex flex-col md:flex-row md:items-center md:space-x-3 cursor-pointer";
     div.dataset.id = item.id;
     div.setAttribute("tabindex", "0");
     div.setAttribute("role", "button");
     div.setAttribute("aria-pressed", "false");
     div.innerHTML = `
      <img src="${item.image}" alt="${item.alt}" class="w-20 h-20 md:w-28 md:h-28 object-contain mx-auto md:mx-0 rounded" height="120" width="120" />
      <div class="mt-2 md:mt-0 text-center md:text-left">
       <h3 class="text-lg md:text-xl font-semibold mb-1 leading-tight">${item.title}</h3>
       <p class="text-gray-300 mb-1 leading-snug max-w-xl">${item.description}</p>
       <p class="text-indigo-400 font-semibold">Data de Lançamento: ${item.launchDate}</p>
      </div>
     `;
     div.addEventListener("click", () => openArticle(item.id));
     div.addEventListener("keydown", (e) => {
      if (e.key === "Enter" || e.key === " ") {
       e.preventDefault();
       openArticle(item.id);
      }
     });
     container.appendChild(div);
    });
   }

   function renderGallery(galleryData) {
    const container = document.getElementById("gallery-container");
    container.innerHTML = "";
    galleryData.forEach((item) => {
     const img = document.createElement("img");
     img.src = item.src;
     img.alt = item.alt;
     img.className = "rounded-lg object-cover w-full h-20 sm:h-24 md:h-28 cursor-pointer";
     img.height = 160;
     img.dataset.id = item.id;
     img.setAttribute("tabindex", "0");
     img.setAttribute("role", "button");
     img.setAttribute("aria-pressed", "false");
     img.addEventListener("click", () => openArticle(item.id));
     img.addEventListener("keydown", (e) => {
      if (e.key === "Enter" || e.key === " ") {
       e.preventDefault();
       openArticle(item.id);
      }
     });
     container.appendChild(img);
    });
   }

   function renderEvents(eventsData) {
    const container = document.getElementById("events-container");
    container.innerHTML = "";
    eventsData.forEach((item) => {
     const div = document.createElement("div");
     div.className =
      "bg-gray-800 rounded-lg shadow-lg p-3 md:p-4 flex flex-col md:flex-row md:items-center md:justify-between cursor-pointer";
     div.dataset.id = item.id;
     div.setAttribute("tabindex", "0");
     div.setAttribute("role", "button");
     div.setAttribute("aria-pressed", "false");
     div.innerHTML = `
      <div>
       <h3 class="text-lg font-semibold mb-1 leading-tight">${item.title}</h3>
       <p class="text-gray-300 leading-snug max-w-xl">${item.description}</p>
      </div>
      <time class="mt-2 md:mt-0 text-indigo-400 font-semibold">${item.date}</time>
     `;
     div.addEventListener("click", () => openArticle(item.id));
     div.addEventListener("keydown", (e) => {
      if (e.key === "Enter" || e.key === " ") {
       e.preventDefault();
       openArticle(item.id);
      }
     });
     container.appendChild(div);
    });
   }

   // URLs dos arquivos JSON (substitua pelos caminhos corretos)
   const urls = {
    news: "news.json",
    missions: "missions.json",
    gallery: "gallery.json",
    events: "events.json",
    articles: "articles.json",
   };

   // Dados carregados
   let articlesData = [];

   // PDF.js worker setup
   pdfjsLib.GlobalWorkerOptions.workerSrc =
    "https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.9.179/pdf.worker.min.js";

   // Função para renderizar PDF em canvas
   async function renderPDF(src, container) {
    try {
     const loadingTask = pdfjsLib.getDocument(src);
     const pdf = await loadingTask.promise;
     const page = await pdf.getPage(1);
     const viewport = page.getViewport({ scale: 1.5 });
     const canvas = document.createElement("canvas");
     const context = canvas.getContext("2d");
     canvas.height = viewport.height;
     canvas.width = viewport.width;
     await page.render({ canvasContext: context, viewport: viewport }).promise;
     container.appendChild(canvas);
    } catch (error) {
     const errorMsg = document.createElement("p");
     errorMsg.textContent = "Erro ao carregar o PDF.";
     errorMsg.className = "text-red-500";
     container.appendChild(errorMsg);
     console.error(error);
    }
   }

   // Abrir modal artigo
   const modal = document.getElementById("article-modal");
   const articleContent = document.getElementById("article-content");
   const closeBtn = document.getElementById("close-article");

   async function openArticle(id) {
    const article = articlesData.find((a) => a.id === id);
    if (!article) return;

    // Limpar conteúdo
    articleContent.innerHTML = "";

    // Título
    const title = document.createElement("h2");
    title.id = "article-title";
    title.className = "text-2xl font-bold mb-4";
    title.textContent = article.title;
    articleContent.appendChild(title);

    // Conteúdo multimídia
    if (article.type === "image" && article.src) {
     const img = document.createElement("img");
     img.src = article.src;
     img.alt = article.alt || article.title;
     img.className = "rounded-lg mb-4 max-w-full h-auto mx-auto";
     articleContent.appendChild(img);
    } else if (article.type === "video" && article.src) {
     const video = document.createElement("video");
     video.src = article.src;
     video.controls = true;
     video.className = "rounded-lg mb-4 max-w-full mx-auto";
     articleContent.appendChild(video);
    } else if (article.type === "pdf" && article.src) {
     // Render PDF first page in canvas
     await renderPDF(article.src, articleContent);
    }

    // Texto
    if (article.text) {
     const p = document.createElement("p");
     p.className = "text-gray-300 leading-relaxed whitespace-pre-line";
     p.textContent = article.text;
     articleContent.appendChild(p);
    }

    // Mostrar modal
    modal.classList.remove("hidden");
    // Focar no botão fechar para acessibilidade
    closeBtn.focus();
   }

   // Fechar modal
   closeBtn.addEventListener("click", () => {
    modal.classList.add("hidden");
   });

   // Fechar modal com ESC
   window.addEventListener("keydown", (e) => {
    if (e.key === "Escape" && !modal.classList.contains("hidden")) {
     modal.classList.add("hidden");
    }
   });

   // Carregar e renderizar todos os dados
   async function loadAllData() {
    const [newsData, missionsData, galleryData, eventsData, articles] =
     await Promise.all([
      fetchJSON(urls.news),
      fetchJSON(urls.missions),
      fetchJSON(urls.gallery),
      fetchJSON(urls.events),
      fetchJSON(urls.articles),
     ]);

    if (newsData) renderNews(newsData);
    if (missionsData) renderMissions(missionsData);
    if (galleryData) renderGallery(galleryData);
    if (eventsData) renderEvents(eventsData);
    if (articles) articlesData = articles;
   }

   loadAllData();
  </script>
 </body>
</html>
